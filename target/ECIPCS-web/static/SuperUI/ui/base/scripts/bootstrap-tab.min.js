var addTabs=function(b){var a=window.location.protocol+"//"+window.location.host+"/";b.url=a+b.url;id="tab_"+b.id;var f="",c="";if(!$("#"+id)[0]){var d=App.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight()-$(".content-tabs").height();f='<a href="javascript:void(0);" id="tab_'+id+'"  data-id="'+id+'"  class="menu_tab" >'+b.title;if(b.close){f+=' <i class="fa fa-remove page_tab_close" style="cursor: pointer;" data-id="'+id+'" onclick="closeTab(this)"></i>'}f+="</a>";var e="";if(b.content){c='<div role="tabpanel" class="tab-pane" id="'+id+'">'+b.content+"</div>"}else{App.blockUI({target:"#tab-content",boxed:true,message:"加载中......"});c='<div role="tabpanel" class="tab-pane" id="'+id+'">';e='<iframe onload="javascript:App.unblockUI(\'#tab-content\');" src="'+b.url+'" width="100%" height="100%" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="yes"  allowtransparency="yes" id="iframe_'+id+'" class="  tab_iframe"></iframe>';c+=e;c+="</div>"}Cookies.set("currentmoduleName",b.title,{path:"/"});Cookies.set("currentmoduleId",b.id,{path:"/"});$(".page-tabs-content").append(f);$("#tab-content").append(c)}$(".page-tabs-content > a.active").removeClass("active");$("#tab-content > .active").removeClass("active");$("#tab_"+id).addClass("active");scrollToTab($(".menu_tab.active"));$("#"+id).addClass("active")};var closeTab=function(c){var d=$(c).attr("data-id");if($(".page-tabs-content > a.active").attr("id")==="tab_"+d){var b=$("#tab_"+d).prev();var a=$("#"+d).prev();setTimeout(function(){b.addClass("active");a.addClass("active")},300)}$("#tab_"+d).remove();$("#"+d).remove()};var closeCurrentTab=function(){var a=$(".page-tabs-content").find(".active").find(".fa-remove").parents("a");if(a){closeTab(a)}};var refreshTab=function(){var a=$(".page-tabs-content").find(".active").attr("data-id");var c=$("#iframe_"+a);var b=c.attr("src");c.attr("src",b)};var closeOtherTabs=function(a){if(a){$(".page-tabs-content").children("[data-id]").find(".fa-remove").parents("a").each(function(){$("#"+$(this).data("id")).remove();$(this).remove()});var b=$(".page-tabs-content").children();if(b){$("#"+b.data("id")).addClass("active");b.addClass("active")}}else{$(".page-tabs-content").children("[data-id]").find(".fa-remove").parents("a").not(".active").each(function(){$("#"+$(this).data("id")).remove();$(this).remove()})}};var calSumWidth=function(a){var b=0;$(a).each(function(){b+=$(this).outerWidth(true)});return b};var scrollTabRight=function(){var e=Math.abs(parseInt($(".page-tabs-content").css("margin-left")));var b=calSumWidth($(".content-tabs").children().not(".menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").width()<a){return false}else{var c=$(".menu_tab:first");var d=0;while((d+$(c).outerWidth(true))<=e){d+=$(c).outerWidth(true);c=$(c).next()}d=0;while((d+$(c).outerWidth(true))<(a)&&c.length>0){d+=$(c).outerWidth(true);c=$(c).next()}f=calSumWidth($(c).prevAll());if(f>0){$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")}}};var scrollToTab=function(d){var e=calSumWidth($(d).prevAll()),g=calSumWidth($(d).nextAll());var b=calSumWidth($(".content-tabs").children().not(".menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").outerWidth()<a){f=0}else{if(g<=(a-$(d).outerWidth(true)-$(d).next().outerWidth(true))){if((a-$(d).next().outerWidth(true))>g){f=e;var c=d;while((f-$(c).outerWidth())>($(".page-tabs-content").outerWidth()-a)){f-=$(c).prev().outerWidth();c=$(c).prev()}}}else{if(e>(a-$(d).outerWidth(true)-$(d).prev().outerWidth(true))){f=e-$(d).prev().outerWidth(true)}}}$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")};var scrollTabLeft=function(){var e=Math.abs(parseInt($(".page-tabs-content").css("margin-left")));var b=calSumWidth($(".content-tabs").children().not(".menuTabs"));var a=$(".content-tabs").outerWidth(true)-b;var f=0;if($(".page-tabs-content").width()<a){return false}else{var c=$(".menu_tab:first");var d=0;while((d+$(c).outerWidth(true))<=e){d+=$(c).outerWidth(true);c=$(c).next()}d=0;if(calSumWidth($(c).prevAll())>a){while((d+$(c).outerWidth(true))<(a)&&c.length>0){d+=$(c).outerWidth(true);c=$(c).prev()}f=calSumWidth($(c).prevAll())}}$(".page-tabs-content").animate({marginLeft:0-f+"px"},"fast")};var activeTab=function(){var a=$(this).attr("data-id");$(".menu_tab").removeClass("active");$("#tab-content > .active").removeClass("active");$("#tab_"+a).addClass("active");$("#"+a).addClass("active");$("#iframe_"+a).animate({height:App.getIframeLayoutHeight()+1},500);$("#iframe_"+a).animate({height:App.getIframeLayoutHeight()-1},500);scrollToTab(this)};$(function(){$(".menuTabs").on("click",".menu_tab",activeTab)});