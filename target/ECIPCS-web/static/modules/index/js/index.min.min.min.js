var settings={homeTabTitle:"首页",homeTabUrl:"/admin/sys/user/info",homtTabIcon:"glyphicon glyphicon-home"};function iFrameHeight(a){if(a){}}function openHomeTab(){var a=settings.homeTabUrl;var c=settings.homtTabIcon;var f=settings.homeTabTitle;if(!a||a=="#"){return false}var d=$("#maintabs");var e=d.tabs("tabs").length;var b=d.tabs("exists",f);if(!b){d.tabs("add",{title:f,content:createFrame(a),closable:true})}}function setLocationHash(){var f=function(h){var e=h.find("iframe");return e.length?e[0].src.replace(location.host,"").replace("http://","").replace(".jsp",""):""};try{var a=$(".tab-content").find(".active");if(a){c=f(a);if(c){window.location.hash="!"+c}if(c==homeUrl){window.location.hash=""}}else{c=f(g[g.length-1]);window.location.hash="!"+c}return;var d=$("#maintabs");var c="",g=d.data().tabs.tabs;var a=d.tabs("getSelected");if(a){c=f(a);if(c){window.location.hash="!"+c}if(c==homeUrl){window.location.hash=""}}else{c=f(g[g.length-1]);window.location.hash="!"+c}}catch(b){}}function getTabTitles(c){var a=[];var b=c.tabs("tabs");$.each(b,function(){a.push($(this).panel("options").title)});return a}function openTabHandler(b,a,d,c){if(!a){b.tabs("add",{title:d,content:createFrame(c),closable:true})}else{b.tabs("select",d);tabRefresh(c)}setLocationHash()}function addTab(a,e){if(!e||e=="#"){return false}addTabs(({id:a,title:a,close:true,url:e}));setLocationHash();return;var c=$("#maintabs");var d=c.tabs("tabs").length;var b=c.tabs("exists",a);openTabHandler(c,b,a,e)}function tabRefresh(c){var d=$("#maintabs");var b=d.tabs("getSelected");var a=$(b.panel("options").content).attr("src");if(typeof a==="string"){a=c}d.tabs("update",{tab:b,options:{content:createFrame(a)}})}function createFrame(a){return'<iframe  width="100%" height="100%" class="tab_iframe" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="yes" src="'+a+'" ></iframe>'}function rightMenuClick(g){var a=$("#maintabs");var d=a.tabs("getSelected");var c=getTabTitles(a);switch(g.id){case"refresh":var b=$(d.panel("options").content).attr("src");a.tabs("update",{tab:d,options:{content:createFrame(b)}});break;case"close":var f=d.panel("options").title;a.tabs("close",f);break;case"closeall":$.each(c,function(){if(this!=settings.homeTabTitle){a.tabs("close",this)}});break;case"closeother":var f=d.panel("options").title;$.each(c,function(){if(this!=f&&this!=settings.homeTabTitle){a.tabs("close",this)}});break;case"closeright":var e=a.tabs("getTabIndex",d);if(e==c.length-1){alert("亲，后边没有啦 ^@@^!!");return false}$.each(c,function(h){if(h>e&&this!=settings.homeTabTitle){a.tabs("close",this)}});break;case"closeleft":var e=a.tabs("getTabIndex",d);if(e==1){alert("亲，前边那个上头有人，咱惹不起哦。 ^@@^!!");return false}$.each(c,function(h){if(h<e&&this!=settings.homeTabTitle){a.tabs("close",this)}});break;case"exit":$("#closeMenu").menu("hide");break}}function tabContextMenu(a,b){$("#tabMenu").menu("show",{left:a.pageX,top:a.pageY});$("#maintabs").tabs("select",b);a.preventDefault()}function initLocationHash(a){var b=location.hash.replace("#!","");$.each(a,function(){if(!this.funcUrl){return}var c=this.funcUrl.replace(".jsp","");if(this.funcUrl&&this.funcUrl!="#"&&(b==c||b.indexOf(c)>-1)){addTab(this.funcName,this.funcUrl)}})};