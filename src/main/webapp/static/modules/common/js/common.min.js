/*!
 * Copyright &copy; 2012-2016 <a href="https://github.com/htiiot.admin">XFrame</a> All rights reserved.
 * 
 * 通用公共方法
 * @author XCD
 * @version 2014-4-29
 */
function successMsg(a){window.top.app.$Message.success(a)}function errorMsg(a){window.top.app.$Message.error(a)}function ajaxGet(d,a,b,e){e=e||true;var c=layer.load();$.ajax({type:"get",url:d,cache:false,success:function(g,f){layer.close(c);if(typeof g=="string"&&g.indexOf("login-body")!=-1){window.location.href="/login";return}if(e&&g.message&&g.message!=""){if(g.code=="success"){successMsg(g.message)}else{errorMsg(g.message)}}if(typeof(a)=="function"){a(g,f)}},error:function(h,g,f){layer.close(c);if(h&&typeof(h)!="object"&&h!=""){errorMsg(h)}else{if(h&&h.responseText){errorMsg(h.responseText)}}if(typeof(b)=="function"){b(h)}}})}function ajaxPost(d,e,a,b,f){f=f||true;var c=layer.load();$.ajax({type:"post",url:d,cache:false,data:e,success:function(h,g){layer.close(c);if(typeof h=="string"&&h.indexOf("login-body")!=-1){window.location.href="/login";return}if(f&&h.message&&h.message!=""){if(h.code=="success"){successMsg(h.message)}else{errorMsg(h.message)}}if(typeof(a)=="function"){a(h)}},error:function(i,h,g){layer.close(c);if(i&&typeof(i)!="object"&&i!=""){errorMsg(i)}else{if(i&&i.responseText){errorMsg(i.responseText)}}if(typeof(b)=="function"){b(i)}}})}function ajaxPostJSON(d,e,a,b,f){f=f||true;var c=layer.load();$.ajax({type:"post",url:d,cache:false,data:JSON.stringify(e),dataType:"json",contentType:"application/json;charset=utf-8",success:function(h,g){layer.close(c);if(typeof h=="string"&&h.indexOf("login-body")!=-1){window.location.href="/login";return}if(f&&h.message&&h.message!=""){if(h.code=="success"){successMsg(h.message)}else{errorMsg(h.message)}}if(typeof(a)=="function"){a(h)}},error:function(i,h,g){layer.close(c);if(i&&typeof(i)!="object"&&i!=""){errorMsg(i)}else{if(i&&i.responseText){errorMsg(i.responseText)}}if(typeof(b)=="function"){b(i)}}})}Date.prototype.Format=function(a){var c={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};if(/(y+)/.test(a)){a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))}for(var b in c){if(new RegExp("("+b+")").test(a)){a=a.replace(RegExp.$1,(RegExp.$1.length==1)?(c[b]):(("00"+c[b]).substr((""+c[b]).length)))}}return a};function toTreeData(l,g,m,c){var b=[],e={},h=(l||[]).length;for(var f=0;f<h;f++){e[l[f][g]]=l[f]}for(var d=0;d<h;d++){var n=l[d],k=e[n[m]];if(!n[c]){n[c]=[]}if(k){if(!k[c]){k[c]=[]}k[c].push(n)}else{b.push(n)}}return b}function include(c,m,e){if(document.getElementById(c)==null){var a=typeof e=="string"?[e]:e;for(var f=0;f<a.length;f++){var b=a[f].replace(/^\s|\s$/g,"");var h=b.split(".");var d=h[h.length-1].toLowerCase();var k=d=="css";var l=k?"link":"script";var g=k?" type='text/css' rel='stylesheet' ":" type='text/javascript' ";var j=(k?"href":"src")+"='"+m+b+"'";document.write("<"+l+(f==0?" id="+c:"")+g+j+"></"+l+">")}}}function getQueryString(b,a){var c=new RegExp("(^|&)"+b+"=([^&]*)(&|$)","i");if(!a||a==""){a=window.location.search}else{a=a.substring(a.indexOf("?"))}r=a.substr(1).match(c);if(r!=null){return unescape(r[2])}return null}function getDictLabel(d,c,a){for(var b=0;b<d.length;b++){var e=d[b];if(e.value==c){return e.label}}return a}function windowOpen(d,c,e,a){var g=parseInt((window.screen.height-a)/2,10),f=parseInt((window.screen.width-e)/2,10),b="location=no,menubar=no,toolbar=no,dependent=yes,minimizable=no,modal=yes,alwaysRaised=yes,resizable=yes,scrollbars=yes,width="+e+",height="+a+",top="+g+",left="+f;window.open(d,c,b)}function alertx(b,a){top.$.jBox.info(b,"提示",{closed:function(){if(typeof a=="function"){a()}}});top.$(".jbox-body .jbox-icon").css("top","55px")}function confirmx(c,b,a){top.$.jBox.confirm(c,"系统提示",function(d,e,g){if(d=="ok"){if(typeof b=="function"){b()}else{resetTip();location=b}}},{buttonsFocus:1,closed:function(){if(typeof a=="function"){a()}}});top.$(".jbox-body .jbox-icon").css("top","55px");return false}function promptx(d,c,b,a){top.$.jBox("<div class='form-search' style='padding:20px;text-align:center;'>"+c+"：<input type='text' id='txt' name='txt'/></div>",{title:d,submit:function(e,g,i){if(i.txt==""){top.$.jBox.tip("请输入"+c+"。","error");return false}if(typeof b=="function"){b()}else{resetTip();location=b+encodeURIComponent(i.txt)}},closed:function(){if(typeof a=="function"){a()}}});return false}function cookie(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+m.path:"";var g=m.domain?"; domain="+m.domain:"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}}function pad(b,c){var a=b.toString().length;while(a<c){b="0"+b;a++}return b}function strToDate(a){return new Date(a.replace(/-/g,"/"))}function addDate(a,b){a=a.valueOf();a=a+b*24*60*60*1000;return new Date(a)}function abbr(a,e){if(!e){e=20}if(a==null||a.length<1){return""}var k=0;var l=0;var d=false;var j=false;var g;for(var f=0;f<a.length;f++){if(f>1&&j==false){d=false}if(f>1&&j==true){d=true}var h=a.charCodeAt(f);if((h>=1&&h<=126)||(65376<=h&&h<=65439)){k++;j=false}else{k+=2;l++;j=true}if(k>e&&f<=a.length-1){if(j==true&&d==true){g=a.substring(0,f-2)+"..."}if(j==false&&d==false){g=a.substring(0,f-3)+"..."}if(j==true&&d==false){g=a.substring(0,f-2)+"..."}if(d==true){g=a.substring(0,f-2)+"..."}break}}if(k<=e){return a}return g}function isPositiveNum(b){var a=/^[0-9]*[1-9][0-9]*$/;return a.test(b)};