var settings={homeTabTitle:"首页",homeTabUrl:"/admin/sys/user/info",homtTabIcon:"glyphicon glyphicon-home"};function iFrameHeight(b){if(b){}}function openHomeTab(){var l=settings.homeTabUrl;var j=settings.homtTabIcon;var g=settings.homeTabTitle;if(!l||l=="#"){return false}var i=$("#maintabs");var h=i.tabs("tabs").length;var k=i.tabs("exists",g);if(!k){i.tabs("add",{title:g,content:createFrame(l),closable:true})}}function setLocationHash(){var h=function(a){var b=a.find("iframe");return b.length?b[0].src.replace(location.host,"").replace("http://","").replace(".jsp",""):""};try{var l=$(".tab-content").find(".active");if(l){j=h(l);if(j){window.location.hash="!"+j}if(j==homeUrl){window.location.hash=""}}else{j=h(e[e.length-1]);window.location.hash="!"+j}return;var i=$("#maintabs");var j="",e=i.data().tabs.tabs;var l=i.tabs("getSelected");if(l){j=h(l);if(j){window.location.hash="!"+j}if(j==homeUrl){window.location.hash=""}}else{j=h(e[e.length-1]);window.location.hash="!"+j}}catch(k){}}function getTabTitles(d){var f=[];var e=d.tabs("tabs");$.each(e,function(){f.push($(this).panel("options").title)});return f}function openTabHandler(g,h,e,f){if(!h){g.tabs("add",{title:e,content:createFrame(f),closable:true})}else{g.tabs("select",e);tabRefresh(f)}setLocationHash()}function addTab(j,f){if(!f||f=="#"){return false}addTabs(({id:j,title:j,close:true,url:f}));setLocationHash();return;var h=$("#maintabs");var g=h.tabs("tabs").length;var i=h.tabs("exists",j);openTabHandler(h,i,j,f)}function tabRefresh(f){var e=$("#maintabs");var g=e.tabs("getSelected");var h=$(g.panel("options").content).attr("src");if(typeof h==="string"){h=f}e.tabs("update",{tab:g,options:{content:createFrame(h)}})}function createFrame(b){return'<iframe  width="100%" height="100%" class="tab_iframe" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="yes" src="'+b+'" ></iframe>'}function rightMenuClick(n){var m=$("#maintabs");var j=m.tabs("getSelected");var k=getTabTitles(m);switch(n.id){case"refresh":var l=$(j.panel("options").content).attr("src");m.tabs("update",{tab:j,options:{content:createFrame(l)}});break;case"close":var h=j.panel("options").title;m.tabs("close",h);break;case"closeall":$.each(k,function(){if(this!=settings.homeTabTitle){m.tabs("close",this)}});break;case"closeother":var h=j.panel("options").title;$.each(k,function(){if(this!=h&&this!=settings.homeTabTitle){m.tabs("close",this)}});break;case"closeright":var i=m.tabs("getTabIndex",j);if(i==k.length-1){alert("亲，后边没有啦 ^@@^!!");return false}$.each(k,function(a){if(a>i&&this!=settings.homeTabTitle){m.tabs("close",this)}});break;case"closeleft":var i=m.tabs("getTabIndex",j);if(i==1){alert("亲，前边那个上头有人，咱惹不起哦。 ^@@^!!");return false}$.each(k,function(a){if(a<i&&this!=settings.homeTabTitle){m.tabs("close",this)}});break;case"exit":$("#closeMenu").menu("hide");break}}function tabContextMenu(d,c){$("#tabMenu").menu("show",{left:d.pageX,top:d.pageY});$("#maintabs").tabs("select",c);d.preventDefault()}function initLocationHash(d){var c=location.hash.replace("#!","");$.each(d,function(){if(!this.funcUrl){return}var a=this.funcUrl.replace(".jsp","");if(this.funcUrl&&this.funcUrl!="#"&&(c==a||c.indexOf(a)>-1)){addTab(this.funcName,this.funcUrl)}})};