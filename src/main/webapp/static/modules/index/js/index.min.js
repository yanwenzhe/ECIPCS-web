var settings={homeTabTitle:"首页",homeTabUrl:"/admin/sys/user/info",homtTabIcon:"glyphicon glyphicon-home"};function iFrameHeight(a){if(a){}}function openHomeTab(){var c=settings.homeTabUrl;var e=settings.homtTabIcon;var b=settings.homeTabTitle;if(!c||c=="#"){return false}var f=$("#maintabs");var a=f.tabs("tabs").length;var d=f.tabs("exists",b);if(!d){f.tabs("add",{title:b,content:createFrame(c),closable:true})}}function setLocationHash(){var a=function(h){var e=h.find("iframe");return e.length?e[0].src.replace(location.host,"").replace("http://","").replace(".jsp",""):""};try{var c=$(".tab-content").find(".active");if(c){f=a(c);if(f){window.location.hash="!"+f}if(f==homeUrl){window.location.hash=""}}else{f=a(b[b.length-1]);window.location.hash="!"+f}return;var g=$("#maintabs");var f="",b=g.data().tabs.tabs;var c=g.tabs("getSelected");if(c){f=a(c);if(f){window.location.hash="!"+f}if(f==homeUrl){window.location.hash=""}}else{f=a(b[b.length-1]);window.location.hash="!"+f}}catch(d){}}function getTabTitles(b){var c=[];var a=b.tabs("tabs");$.each(a,function(){c.push($(this).panel("options").title)});return c}function openTabHandler(d,c,b,a){if(!c){d.tabs("add",{title:b,content:createFrame(a),closable:true})}else{d.tabs("select",b);tabRefresh(a)}setLocationHash()}function addTab(c,b){if(!b||b=="#"){return false}addTabs(({id:c,title:c,close:true,url:b}));setLocationHash();return;var e=$("#maintabs");var a=e.tabs("tabs").length;var d=e.tabs("exists",c);openTabHandler(e,d,c,b)}function tabRefresh(a){var b=$("#maintabs");var d=b.tabs("getSelected");var c=$(d.panel("options").content).attr("src");if(typeof c==="string"){c=a}b.tabs("update",{tab:d,options:{content:createFrame(c)}})}function createFrame(a){return'<iframe  width="100%" height="100%" class="tab_iframe" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="yes" src="'+a+'" ></iframe>'}function rightMenuClick(c){var d=$("#maintabs");var g=d.tabs("getSelected");var f=getTabTitles(d);switch(c.id){case"refresh":var e=$(g.panel("options").content).attr("src");d.tabs("update",{tab:g,options:{content:createFrame(e)}});break;case"close":var b=g.panel("options").title;d.tabs("close",b);break;case"closeall":$.each(f,function(){if(this!=settings.homeTabTitle){d.tabs("close",this)}});break;case"closeother":var b=g.panel("options").title;$.each(f,function(){if(this!=b&&this!=settings.homeTabTitle){d.tabs("close",this)}});break;case"closeright":var a=d.tabs("getTabIndex",g);if(a==f.length-1){alert("亲，后边没有啦 ^@@^!!");return false}$.each(f,function(h){if(h>a&&this!=settings.homeTabTitle){d.tabs("close",this)}});break;case"closeleft":var a=d.tabs("getTabIndex",g);if(a==1){alert("亲，前边那个上头有人，咱惹不起哦。 ^@@^!!");return false}$.each(f,function(h){if(h<a&&this!=settings.homeTabTitle){d.tabs("close",this)}});break;case"exit":$("#closeMenu").menu("hide");break}}function tabContextMenu(a,b){$("#tabMenu").menu("show",{left:a.pageX,top:a.pageY});$("#maintabs").tabs("select",b);a.preventDefault()}function initLocationHash(a){var b=location.hash.replace("#!","");$.each(a,function(){if(!this.funcUrl){return}var c=this.funcUrl.replace(".jsp","");if(this.funcUrl&&this.funcUrl!="#"&&(b==c||b.indexOf(c)>-1)){addTab(this.funcName,this.funcUrl)}})};